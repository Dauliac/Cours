<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Introduction au Syst√®me d&#x27;exploitation - Cours &quot;opensource&quot;</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content=".">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Cours</li><li class="chapter-item expanded "><a href="../sdlc/index.html"><strong aria-hidden="true">1.</strong> Introduction au SDLC</a></li><li class="chapter-item expanded "><a href="../system/index.html" class="active"><strong aria-hidden="true">2.</strong> Introduction au Syst√®me d'exploitation</a></li><li class="chapter-item expanded "><a href="../licences/index.html"><strong aria-hidden="true">3.</strong> Licences num√©riques</a></li><li class="chapter-item expanded "><a href="../documentations/index.html"><strong aria-hidden="true">4.</strong> Documentation technique</a></li><li class="chapter-item expanded affix "><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">References (Outils, concepts cl√©s et ressources)</li><li class="chapter-item expanded "><a href="../sdlc/references/outils-gestion-projet.html"><strong aria-hidden="true">5.</strong> Outils de gestion de projet</a></li><li class="chapter-item expanded "><a href="../sdlc/references/devops-pratiques.html"><strong aria-hidden="true">6.</strong> Bonnes pratiques DevOps</a></li><li class="chapter-item expanded affix "><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Tutorials (TPs et mise en pratique)</li><li class="chapter-item expanded "><a href="../sdlc/tps/packager-avec-nix/index.html"><strong aria-hidden="true">7.</strong> Packager avec nix</a></li><li class="chapter-item expanded "><a href="../sdlc/tps/container-parfait-avec-nix/index.html"><strong aria-hidden="true">8.</strong> Construire un container parfait avec nix ?</a></li><li class="chapter-item expanded affix "><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">How-To Guides</li><li class="chapter-item expanded "><a href="../nix/INSTALL.html"><strong aria-hidden="true">9.</strong> Install nix</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Cours &quot;opensource&quot;</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<hr />
<h2 id="header-systems-course-footer-julien-dauliac----ynovcasualty925passfwdcom"><a class="header" href="#header-systems-course-footer-julien-dauliac----ynovcasualty925passfwdcom">header: 'Systems Course' footer: 'Julien Dauliac -- ynov.casualty925@passfwd.com'</a></h2>
<!-- headingDivider: 3 -->
<!-- paginate: true -->
<!-- colorPreset: sunset -->
<h1 id="systems-course"><a class="header" href="#systems-course">Systems Course</a></h1>
<ul>
<li><a href="#introduction">Introduction</a>
<ul>
<li><a href="#objectives">Objectives</a></li>
<li><a href="#what-is-an-os">What is an OS?</a>
<ul>
<li><a href="#what-does-an-os-offer">What does an OS offer?</a></li>
</ul>
</li>
<li><a href="#a-simple-system-to-start">A Simple System to Start</a></li>
</ul>
</li>
<li><a href="#bios">BIOS</a>
<ul>
<li><a href="#hardcore-bios">Hardcore BIOS</a></li>
<li><a href="#corporate-bios">Corporate BIOS</a></li>
<li><a href="#casual-bios">Casual BIOS</a></li>
<li><a href="#what-is-a-bios">What is a <code>BIOS</code>?</a>
<ul>
<li><a href="#a-language-misuse">A Language Misuse</a></li>
<li><a href="#uefi-architecture">UEFI Architecture</a></li>
</ul>
</li>
<li><a href="#security">Security</a></li>
<li><a href="#an-open-source-bios-">An Open Source BIOS üéä</a></li>
</ul>
</li>
<li><a href="#kernel">Kernel</a>
<ul>
<li><a href="#kernel-components-summary">Kernel Components Summary</a></li>
<li><a href="#scheduler">Scheduler</a>
<ul>
<li><a href="#how-do-we-run-multiple-processes">How do we run multiple processes?</a></li>
<li><a href="#scheduler-and-timer">Scheduler and Timer</a></li>
<li><a href="#scheduling-algorithms">Scheduling Algorithms</a></li>
</ul>
</li>
<li><a href="#system-calls-syscalls">System Calls (Syscalls)</a></li>
</ul>
</li>
</ul>
<h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<h2 id="objectives"><a class="header" href="#objectives">Objectives</a></h2>
<ul>
<li>Understand the system boot process, from BIOS initialization to kernel execution.</li>
<li>Gain foundational knowledge of operating system architectures.</li>
<li>Explore different forms of isolation, including virtual machines, containers, and lambdas, and understand their advantages and disadvantages.</li>
</ul>
<h2 id="what-is-an-os"><a class="header" href="#what-is-an-os">What is an OS?</a></h2>
<h3 id="what-does-an-os-offer"><a class="header" href="#what-does-an-os-offer">What does an OS offer?</a></h3>
<ul>
<li>Do I need one?
<ul>
<li>Not necessarily, but if it's a personal computer (PC), it‚Äôs better.</li>
</ul>
</li>
<li>Why?
<ul>
<li>To abstract the hardware.</li>
</ul>
</li>
</ul>
<h2 id="a-simple-system-to-start"><a class="header" href="#a-simple-system-to-start">A Simple System to Start</a></h2>
<ul>
<li>
<p>BIOS</p>
</li>
<li>
<p>Kernel booted by BIOS</p>
</li>
<li>
<p>Creation of process 0 by the kernel</p>
</li>
<li>
<p>IDLE = process that does nothing:</p>
<pre><code class="language-c">while(true) {}
</code></pre>
</li>
</ul>
<hr />
<p><img src="./assets/system-2.svg" alt="" /></p>
<h1 id="bios"><a class="header" href="#bios">BIOS</a></h1>
<ul>
<li><strong>Fun fact:</strong> üçé The Mac startup sound comes from an illegal sample from The Beatles‚Äô <em>Sgt. Pepper‚Äôs Lonely Hearts Club Band</em> album.</li>
</ul>
<h2 id="hardcore-bios"><a class="header" href="#hardcore-bios">Hardcore BIOS</a></h2>
<p><img src="./assets/Untitled.png" alt="width:200px" />
<img src="./assets/Untitled-1.png" alt="width:200px" /></p>
<h2 id="corporate-bios"><a class="header" href="#corporate-bios">Corporate BIOS</a></h2>
<p><img src="./assets/Untitled-2.png" alt="width:200px" />
<img src="./assets/Untitled-3.png" alt="width:200px" /></p>
<h2 id="casual-bios"><a class="header" href="#casual-bios">Casual BIOS</a></h2>
<p><img src="./assets/Untitled-4.png" alt="width:200px" />
<img src="./assets/Untitled-5.png" alt="width:200px" /></p>
<h2 id="what-is-a-bios"><a class="header" href="#what-is-a-bios">What is a <code>BIOS</code>?</a></h2>
<ul>
<li>The first instruction executed by the processor</li>
<li>Detects and initializes hardware:
<ul>
<li>Processors, memory, I/O controllers, peripherals, etc.</li>
</ul>
</li>
<li>Hardware configuration</li>
<li>Boots the operating system</li>
<li>Old term</li>
</ul>
<h3 id="a-language-misuse"><a class="header" href="#a-language-misuse">A Language Misuse</a></h3>
<ul>
<li><em>Extensible Firmware Interface ‚Üí INTEL</em></li>
<li><strong>Unified Extensible Firmware Interface ‚Üí</strong> <a href="https://fr.wikipedia.org/wiki/Advanced_Micro_Devices">AMD</a>, <a href="https://fr.wikipedia.org/wiki/American_Megatrends">American Megatrends</a>, <a href="https://fr.wikipedia.org/wiki/Apple">Apple</a>, <a href="https://fr.wikipedia.org/wiki/ARM_(entreprise)">ARM</a>, <a href="https://fr.wikipedia.org/wiki/Dell">Dell</a>, <a href="https://fr.wikipedia.org/wiki/Hewlett-Packard">HP</a>, <a href="https://fr.wikipedia.org/wiki/Intel">Intel</a>, <a href="https://fr.wikipedia.org/wiki/International_Business_Machines_Corporation">IBM</a>, Insyde Software, <a href="https://fr.wikipedia.org/wiki/Microsoft">Microsoft</a>, and <a href="https://fr.wikipedia.org/wiki/Phoenix_Technologies">Phoenix Technologies</a></li>
</ul>
<h3 id="uefi-architecture"><a class="header" href="#uefi-architecture">UEFI Architecture</a></h3>
<p><a href="https://fr.wikipedia.org/wiki/UEFI">UEFI</a></p>
<hr />
<ul>
<li>SEC (<em>Security</em>) for executing authentication and integrity control processes (SecureBoot, password, USB token)</li>
</ul>
<hr />
<ul>
<li>PEI (<em>Pre EFI Initialization</em>) for motherboard and chipset initialization. Switches processor to protected mode.</li>
</ul>
<hr />
<ul>
<li>DXE (<em>Driver Execution Environment</em>) for driver registration. Manages EFI application requests like a bootloader.</li>
</ul>
<hr />
<ul>
<li>BDS (<em>Boot Dev Select</em>) for a boot manager like <a href="https://fr.wikipedia.org/wiki/GRand_Unified_Bootloader">GRUB</a></li>
</ul>
<hr />
<ul>
<li>TSL (<em>Transient System Load</em>) for the transition phase where the OS is loaded. EFI services terminate via <em>ExitBootServices()</em>, handing over control to the OS.</li>
</ul>
<hr />
<ul>
<li>RT (<em>RunTime</em>) once the OS takes over. Interaction with firmware is limited to EFI variables stored in NVRAM.</li>
</ul>
<hr />
<p><img src="./assets/system-mermaid-bios.svg" alt="" /></p>
<h2 id="security"><a class="header" href="#security">Security</a></h2>
<blockquote>
<p>The BIOS is not our domain, but we must protect the foundations.</p>
</blockquote>
<ul>
<li>Set a UEFI password</li>
<li>Enable Secure Boot:
<ul>
<li>Signs the bootloader, kernel, and verifies signatures at startup.</li>
</ul>
</li>
</ul>
<h2 id="an-open-source-bios-"><a class="header" href="#an-open-source-bios-">An Open Source BIOS üéä</a></h2>
<p><strong>Open Firmware</strong></p>
<p><a href="https://support.system76.com/articles/transition-firmware/">Firmware Switching (Proprietary Firmware or System76 Open Firmware)</a></p>
<h1 id="kernel"><a class="header" href="#kernel">Kernel</a></h1>
<ul>
<li>Static code</li>
<li>Loaded at startup</li>
<li>Isolates programs from the machine</li>
<li>Interfaces with user space via <code>SYSCALL</code></li>
</ul>
<h2 id="kernel-components-summary"><a class="header" href="#kernel-components-summary">Kernel Components Summary</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Component</th><th>Description</th><th>Study Time</th></tr></thead><tbody>
<tr><td>Scheduler</td><td>Determines which processes run and for how long using scheduling policies.</td><td>‚úÖ</td></tr>
<tr><td>Process Management</td><td>Manages processes and threads, deciding CPU allocation and priorities.</td><td>‚úÖ</td></tr>
<tr><td>System Calls</td><td>Handles requests to the operating system.</td><td>‚úÖ</td></tr>
<tr><td>I/O Management</td><td>Facilitates interactions between hardware and software.</td><td>‚ùå</td></tr>
<tr><td>Drivers</td><td>Manages external devices.</td><td>‚ùå</td></tr>
<tr><td>Inter-Process Communication</td><td>Provides communication mechanisms like signals, pipes, and semaphores.</td><td>‚ùå</td></tr>
<tr><td>RAM Sharing Between Processes</td><td>Uses virtual memory and paging for isolation and sharing.</td><td>‚ùå</td></tr>
</tbody></table>
</div>
<h2 id="scheduler"><a class="header" href="#scheduler">Scheduler</a></h2>
<p><em>What is it?</em></p>
<h3 id="how-do-we-run-multiple-processes"><a class="header" href="#how-do-we-run-multiple-processes">How do we run multiple processes?</a></h3>
<p><img src="./assets/system-2.svg" alt="" /></p>
<h3 id="scheduler-and-timer"><a class="header" href="#scheduler-and-timer">Scheduler and Timer</a></h3>
<p><img src="./assets/system-3.svg" alt="" /></p>
<hr />
<ul>
<li>Scheduler: Algorithm that uses a timer circuit to share CPU access.</li>
<li>The kernel interrupts processes.</li>
<li>The time it takes to give all processes a chance to execute is called an <strong>epoch</strong>.</li>
<li>Uses <strong>system interruptions</strong> to function.</li>
</ul>
<h3 id="scheduling-algorithms"><a class="header" href="#scheduling-algorithms">Scheduling Algorithms</a></h3>
<ul>
<li>Round Robin (each takes turns)</li>
<li>Priority-based</li>
<li>Multi-level feedback queues</li>
</ul>
<hr />
<p>As in life, inequalities can be created.</p>
<pre><code class="language-bash"># renice - alter priority of running processes
renice
</code></pre>
<hr />
<p><strong>Example:</strong></p>
<p>On critical systems like rockets üöÄ, each process can have a set priority.
This is easier when you know all processes in advance.</p>
<h2 id="system-calls-syscalls"><a class="header" href="#system-calls-syscalls">System Calls (Syscalls)</a></h2>
<p><img src="./assets/system-1.svg" alt="" /></p>
<hr />
<ul>
<li>
<p>Communication protocol with the kernel</p>
</li>
<li>
<p>List of numerical identifiers</p>
</li>
<li>
<p>Found in kernel source code:</p>
<pre><code class="language-c">SYSCALL_DEFINE3(ioctl, unsigned int, fd, unsigned int, cmd, unsigned long, arg)
{
/* do freaky ioctl stuff */
}
</code></pre>
</li>
</ul>
<hr />
<div class="table-wrapper"><table><thead><tr><th>System Call</th><th>rax</th><th>rdi</th><th>rsi</th><th>rdx</th><th>r10</th><th>r8</th><th>r9</th></tr></thead><tbody>
<tr><td>sys_chroot</td><td>161</td><td>const char* filename</td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td>sys_chmod</td><td>90</td><td>const char* filename</td><td>uid_t user</td><td>gid_t group</td><td></td><td></td><td></td></tr>
<tr><td>sys_mkdir</td><td>83</td><td>const char* pathname</td><td>int mode</td><td></td><td></td><td></td><td></td></tr>
</tbody></table>
</div>
<p><a href="https://github.com/torvalds/linux/blob/28f20a19294da7df158dfca259d0e2b5866baaf9/arch/x86/entry/syscalls/syscall_64.tbl">Syscall Documentation</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../sdlc/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../licences/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../sdlc/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../licences/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
